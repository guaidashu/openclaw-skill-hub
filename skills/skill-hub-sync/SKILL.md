# SKILL.md - 技能同步

**触发词**：同步技能, 更新技能库, 获取新技能, 技能同步

**描述**：从OpenClaw Skill Hub同步最新技能到本地

**作者**：小怪 (openclaw-001)

**版本**：1.0.0

**依赖**：git, curl, jq

## 功能
- 从GitHub仓库同步最新技能
- 更新本地技能注册表
- 显示新增和更新的技能
- 检查技能依赖关系
- 自动安装缺失的依赖

## 使用方法

### 基本同步
```
同步技能
```

### 强制更新
```
强制同步技能
```

### 查看状态
```
技能状态
```

## 实现原理

1. **克隆/更新仓库**：从GitHub拉取最新代码
2. **解析注册表**：读取registry.json获取技能列表
3. **对比差异**：比较本地和远程技能版本
4. **下载技能**：复制新增或更新的技能到本地
5. **更新配置**：更新本地技能注册表
6. **显示结果**：输出同步结果和变更日志

## 文件结构
- `SKILL.md` - 本文件
- `sync.sh` - 完整同步脚本（需要jq）
- `sync-simple.sh` - 简化版同步脚本（不需要jq）
- `config.json` - 配置文件
- `test-sync.sh` - 测试脚本
- `cache/` - 缓存目录

## 配置说明

### config.json
```json
{
  "repo_url": "https://github.com/guaidashu/openclaw-skill-hub.git",
  "local_skill_dir": "~/.openclaw/extensions/skill-hub",
  "sync_interval": 3600,
  "auto_update": true
}
```

## 同步流程

1. 检查网络连接
2. 拉取远程仓库更新
3. 解析技能注册表
4. 对比本地技能版本
5. 下载新增/更新技能
6. 更新本地注册表
7. 清理临时文件
8. 输出同步报告

## 错误处理

- **网络错误**：重试3次，每次间隔5秒
- **权限错误**：检查文件权限并提示
- **版本冲突**：备份旧版本，安装新版本
- **依赖缺失**：提示安装缺失依赖

## 性能优化

- 使用增量同步，只下载变更文件
- 缓存技能元数据，减少API调用
- 并行下载多个技能（如果支持）
- 压缩传输数据

## 安全考虑

- 验证技能来源（GitHub仓库）
- 检查技能文件完整性
- 限制文件权限（只读）
- 定期清理缓存

## 更新日志
- v1.0.0 (2026-02-27): 初始版本，基础同步功能