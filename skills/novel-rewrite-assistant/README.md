# 小说仿写助手

智能小说仿写助手，分析参考小说并仿照其风格创作新故事，自动生成配角名字和变换场景。

## 功能特性

### 📚 智能小说分析
- **自动抓取**: 从URL读取小说内容
- **内容解析**: 提取章节、角色、情节
- **风格分析**: 分析写作风格、语言特点
- **结构识别**: 识别剧情结构、节奏安排

### 🎭 角色系统
- **主角定制**: 用户指定主角名字和基本设定
- **配角生成**: 自动生成符合背景的配角名字
- **性格分析**: 分析参考小说角色性格特征
- **关系构建**: 自动构建角色关系网络

### 📖 剧情创作
- **框架定义**: 用户定义整体剧情框架
- **仿写创作**: 仿照参考小说风格创作新内容
- **场景变换**: 保持剧情逻辑但改变具体场景
- **情节改编**: 相似但不同的情节发展

### 🎨 写作辅助
- **风格模仿**: 模仿参考小说的语言风格
- **节奏控制**: 保持相似的剧情节奏
- **对话生成**: 生成符合角色性格的对话
- **描写优化**: 优化场景和人物描写

## 快速开始

### 安装依赖
```bash
# 安装Python依赖
pip install requests beautifulsoup4
```

### 使用方法

#### 交互式模式（推荐）
```bash
python novel_rewrite_simple.py -i
```

#### 命令行模式
```bash
# 分析小说
python novel_rewrite_simple.py --url https://example.com/novel

# 完整创作
python novel_rewrite_simple.py --url https://example.com/novel \
  --name "林风" \
  --genre "玄幻" \
  --title "修仙传奇" \
  --chapters 20
```

### 使用流程
1. **输入参考小说URL**
2. **定义主角信息**（名字、年龄、性格、背景）
3. **选择题材类型**（玄幻、都市、言情、科幻等）
4. **定义剧情框架**（主线、结局）
5. **设置章节数量**（10-50章）
6. **自动分析、生成、创作**
7. **保存多种格式输出**

## 文件结构
```
novel-rewrite-assistant/
├── SKILL.md                    # 技能文档
├── README.md                   # 本文件
├── novel_rewrite_simple.py     # 主程序（简化版）
├── analyzer_complete.py        # 小说分析模块
├── simple_character_gen.py     # 角色生成模块
├── story_writer.py             # 故事创作模块
├── config.json                 # 配置文件
└── name_database/              # 名字数据库
    └── names.json
```

## 配置说明

### config.json
```json
{
  "analysis": {
    "max_chapters": 30,          # 最大分析章节数
    "timeout": 30                # 网络请求超时时间
  },
  "generation": {
    "max_supporting_chars": 10,  # 最大配角数量
    "name_style": "chinese"      # 名字风格
  },
  "writing": {
    "min_chapters": 10,          # 最小章节数
    "max_chapters": 50,          # 最大章节数
    "chapter_length": 2000       # 每章目标字数
  }
}
```

## 创作示例

### 输入参考
- **参考小说**: 《斗破苍穹》风格
- **主角**: 林炎（用户自定义）
- **题材**: 玄幻修仙
- **主线**: 废柴获得奇遇，逆袭成为强者

### 输出结果
- **新小说标题**: 《修仙传奇》
- **场景变换**: 乌坦城 → 青云镇
- **配角生成**: 药老 → 剑老（自动生成）
- **剧情改编**: 相似但不同的成长路径
- **写作风格**: 仿照参考小说的热血升级流

### 输出文件
1. `修仙传奇.json` - 完整JSON数据
2. `修仙传奇.md` - Markdown格式文档
3. `修仙传奇.txt` - 纯文本小说正文

## 名字生成系统

### 名字风格
- **玄幻/仙侠**: 玄冥、幻影、魂灵、仙风
- **都市/现代**: 李伟、王芳、张明、刘婷
- **言情/爱情**: 林婉、苏晴、陈雅、赵悦
- **科幻/未来**: 星云、辰光、未来、科技

### 生成规则
1. **文化匹配**: 根据小说背景选择名字风格
2. **性别识别**: 自动识别角色性别
3. **性格关联**: 名字与性格特征关联
4. **避免重复**: 确保名字唯一性

## 场景变换

### 变换规则
- **保持剧情逻辑**: 相似的情节发展
- **改变具体环境**: 不同的场景名称和细节
- **适应新题材**: 根据题材调整场景风格

### 示例变换
```
玄幻: 宗门 → 学院、门派、组织
都市: 公司 → 企业、机构、集团
言情: 校园 → 学院、学校、大学
科幻: 太空站 → 空间站、轨道站、星际站
```

## 性能优化

### 缓存机制
- 小说内容缓存（24小时）
- 分析结果缓存
- 避免重复网络请求

### 资源管理
- 限制分析章节数量
- 控制输出文件大小
- 优化内存使用

## 使用限制

### 技术限制
- 需要网络访问权限
- 依赖网页结构规整
- 中文支持最佳
- 长篇小说需要时间分析

### 版权注意
- 仅供学习和创作参考
- 尊重原作品版权
- 生成的原创内容可自由使用
- 建议注明参考来源

## 故障排除

### 常见问题

#### 1. 无法获取小说内容
```bash
# 检查网络连接
ping example.com

# 检查URL是否正确
curl -I https://example.com/novel
```

#### 2. 分析失败
- 确认网页包含小说内容
- 尝试其他小说网站
- 检查Python依赖是否安装

#### 3. 名字生成不满意
- 修改`name_database/names.json`
- 调整角色类型设置
- 手动指定配角名字

#### 4. 输出内容不理想
- 调整剧情框架
- 修改写作风格设置
- 增加章节数量

## 扩展功能

### 计划功能
1. **多语言支持**: 英文、日文小说分析
2. **深度学习模型**: 更精准的风格模仿
3. **可视化界面**: Web界面或桌面应用
4. **批量处理**: 同时分析多部参考小说
5. **风格库**: 金庸、古龙等特定作家风格

### 自定义扩展
- 添加新的名字数据库
- 创建自定义场景模板
- 开发新的写作风格
- 集成其他创作工具

## 更新日志

### v1.0.0 (2026-02-27)
- 初始版本发布
- 基础小说分析功能
- 智能角色生成系统
- 仿写创作引擎
- 多格式输出支持

## 许可证

MIT License - 详见 LICENSE 文件

## 支持与反馈

- **GitHub Issues**: 提交问题和建议
- **功能请求**: 描述需要的功能
- **错误报告**: 提供复现步骤和日志

---

**让创作更简单，让想象更自由！** ✍️📚